(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1766:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Z}));var n=a(24),c=a.n(n),o=a(1),s=a.n(o),i=a(142),l=a.n(i),r=a(7),d=a.n(r),u=a(35),b=a.n(u),m=a(3);var v=function(e){var t=e.width,a=void 0===t?"10":t,n=e.height,c=void 0===n?"10":n;return Object(m.e)("svg",b()({width:a,height:c,viewBox:"0 0 10 10",fill:"none"},e),Object(m.e)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5C0 2.23858 2.23858 0 5 0ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1ZM5 2C5.27614 2 5.5 2.22386 5.5 2.5V4.21902C5.5 4.54533 5.65921 4.85112 5.92654 5.03825L7.37712 6.05365C7.60334 6.21201 7.65836 6.52378 7.5 6.75C7.34164 6.97622 7.02988 7.03124 6.80365 6.87288L4.92654 5.5589C4.65921 5.37178 4.5 5.06599 4.5 4.73967V2.5C4.5 2.22386 4.72386 2 5 2Z",fill:"white"}))},O=a(333),j="GoodsItemCardPromo",p=function(e){var t=e.countdown,a=Object(o.useState)(t),n=c()(a,2),i=n[0],l=n[1],r=Object(o.useRef)();Object(o.useEffect)((function(){return i<=0?(clearInterval(r.current),void l(0)):(r.current=setInterval((function(){l(i-1)}),1e3),function(){return clearInterval(r.current)})}),[i]);var d=Object(O.b)(i),u=d.d,b=d.h,p=d.m,f=d.s,g="".concat(u?u+"天":""," ").concat(b,":").concat(p,":").concat(f);return Object(m.e)("div",{className:j},Object(m.e)("div",{className:"".concat(j,"-left")},Object(m.e)(v,{className:"".concat(j,"-icon")}),Object(m.e)("span",null,"限时秒杀")),Object(m.e)("div",{className:"".concat(j,"-right")},i?Object(m.e)(s.a.Fragment,null,Object(m.e)("span",null,"距结束还剩 "),Object(m.e)("span",{className:"".concat(j,"-rightText")},g)):Object(m.e)("span",null,"活动已结束")))};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.trimZero,n=void 0!==a&&a,c=String(e).padStart(2,"0").slice(-2);return n&&"00"===c?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(c)}var g=a(2),C=a.n(g),h=a(16),k=a(1269),N=a(531),y=a(19),I=function(e){var t=e.className,a=e.style,n=e.id,c=e.skuId,s=e.imgUrl,i=e.title,l=e.price,r=void 0===l?0:l,u=e.underlinePrice,b=void 0===u?0:u,v=e.source,O=e.productType,j=e.subtitle,g=e.tags,C=void 0===g?[]:g,I=e.promoInfo,w=void 0===I?{}:I,S=e.showBottomLine,G=void 0!==S&&S,L=e.zaData,T=void 0===L?{}:L,F=e.promoType,R=e.onClick,_=Number((null==w?void 0:w.countdown)||0)>0,z=_&&"tag"===F,D=_&&"tag"!==F;Object(o.useEffect)((function(){(null==T?void 0:T.showId)&&h.a.trackCardShow(null,{id:null==T?void 0:T.showId,path:[{module_name:"".concat(n,"_").concat(c,"_").concat(v,"_").concat(O)}]})}),[]);return Object(m.e)("div",{className:d()("GoodsItemCard",{"GoodsItemCard-promo":D},t),style:a,onClick:function(){(null==T?void 0:T.clickId)&&h.a.trackEvent(null,{id:null==T?void 0:T.clickId,action:"OpenUrl",path:[{module_name:"".concat(n,"_").concat(c,"_").concat(v,"_").concat(O)}]}),"function"==typeof R&&R()}},D&&Object(m.e)(p,{countdown:(null==w?void 0:w.countdown)||0}),Object(m.e)("div",{className:"GoodsItemCard-main"},Object(m.e)("div",{className:"GoodsItemCard-left"},Object(m.e)("div",{className:"GoodsItemCard-imgLayer"}),Object(m.e)("img",{className:"GoodsItemCard-imgUrl",src:s,alt:""})),Object(m.e)("div",{className:"GoodsItemCard-right"},Object(m.e)("div",{className:"GoodsItemCard-title"},i),Object(m.e)(N.a,{className:"GoodsItemCard-tags",isPromo:_,promoTagShow:z,countdown:(null==w?void 0:w.countdown)||0,tags:Object(y.camelizeKeys)(C||[])}),Object(m.e)("div",{className:"GoodsItemCard-footer"},Object(m.e)("div",{className:"GoodsItemCard-priceBox"},Object(m.e)("span",{className:"GoodsItemCard-price"},"¥".concat(f(r))),!!b&&Object(m.e)("span",{className:"GoodsItemCard-underlinePrice"},"¥".concat(f(b)))),Object(m.e)("div",{className:"GoodsItemCard-source"},j,Object(m.e)(k.a,{size:20,center:!0})))),Object(m.e)("div",{className:"GoodsItemCard-bottomLine",style:{display:G?"block":"none"}})))};I.prototype={className:C.a.string,style:C.a.object,id:C.a.string,skuId:C.a.string,promoType:C.a.string,imgUrl:C.a.string.isRequired,title:C.a.string.isRequired,subtitle:C.a.string,price:C.a.number,source:C.a.string.isRequired,showBottomLine:C.a.bool,tags:C.a.array,zaData:C.a.object,promoInfo:C.a.object,onClick:C.a.func};var w=I;var S=function(){return Object(m.e)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(m.e)("circle",{opacity:"0.45",cx:"10.5",cy:"9.5",r:"9",stroke:"#444444"}),Object(m.e)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0902 5.40973L7.19188 8.30802C6.93425 8.56261 6.93422 8.96569 7.20772 9.23616C7.43803 9.46345 7.84338 9.54449 8.13586 9.25201L9.86195 7.52591C9.85274 9.20642 9.86308 12.9266 9.86308 12.9266C9.863 14.0797 11.2306 14.0789 11.2261 12.9257C11.2239 11.9915 11.2234 8.8631 11.2265 7.52354L12.9433 9.24029C13.1948 9.48879 13.6017 9.488 13.8699 9.2228C14.1055 8.99018 14.1056 8.5871 13.8874 8.29617L11.0009 5.40967C10.7494 5.15965 10.3425 5.16044 10.0902 5.40973V5.40973Z",fill:"#444444"}))},G=a(829),L=a(40),T=a.n(L),F=function(){return Object(m.e)(s.a.Fragment,null)},R={SkeletonH01:function(e){var t=e.lineClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,a=e.blockClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:a}),Object(m.e)("div",null,Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,a=e.blockClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:a}),Object(m.e)("div",null,Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,a=e.blockClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",null,Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t})),Object(m.e)("div",{className:a}))},SkeletonC03:function(e){var t=e.lineClass,a=e.blockClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:a}),Object(m.e)("div",{style:{width:"100%"}},Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t})))},SkeletonC04:function(e){var t=e.lineClass,a=e.blockClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:"".concat(a,"-1")}),Object(m.e)("div",{className:a}),Object(m.e)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},Object(m.e)("div",{className:t}),Object(m.e)("div",{className:t})))},SkeletonI01:function(e){var t=e.blockClass;return Object(m.e)(s.a.Fragment,null,Object(m.e)("div",{className:t}))},SkeletonSpacing:F,SkeletonFill:F},_=s.a.memo((function(e){var t,a=e.variant,n=void 0===a?"H01":a,c=e.height,o=e.width,s=void 0===o?"auto":o,i=e.animation,l=void 0===i?"ease-in":i,r="skeleton__line--".concat(n.toLowerCase()),u="skeleton--".concat(n.toLowerCase()),b=d()(T()({skeleton__block:!0},"skeleton__block--".concat(n.toLowerCase()),!0)),v=d()(T()({skeleton__line:!0},r,!0)),O=d()((t={skeleton:!0},T()(t,u,!0),T()(t,"skeleton--ease-in","ease-in"===l),t)),j={width:s};c&&["Spacing","Fill"].includes(n)&&(j.height="number"==typeof c?"".concat(c,"px"):c);var p=R["Skeleton".concat(n)];return Object(m.e)("section",{className:O,style:j},Object(m.e)(p,{variant:n,lineClass:v,blockClass:b}))}));_.propTypes={variant:C.a.string,height:C.a.oneOfType([C.a.string,C.a.number]),width:C.a.oneOfType([C.a.string,C.a.number]),animation:C.a.oneOfType([C.a.bool,C.a.string])};var z=_;var D=s.a.memo((function(e){var t=e.content,a=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),a=c()(t,2),n=a[0],o=a[1];return["Spacing","Fill"].includes(n)?{type:n,height:+o}:{type:n,count:+o||1}}))}(void 0===t?"T01":t);return Object(m.e)(s.a.Fragment,null,a.map((function(e,t){var a=e.type,n=e.count,c=e.height;return n?Array.from({length:n}).map((function(e,n){return Object(m.e)(z,{variant:a,key:"".concat(t,"-").concat(n)})})):Object(m.e)(z,{variant:a,height:c,key:"".concat(t,"-").concat(c)})})))}));D.prototype={content:Object(g.oneOfType)([Object(g.arrayOf)(g.string),g.string])};var B=D,M=a(9),P=a(823),x=a(361),E={tabId:"",tabName:"",isGetDataDirect:!0,tabData:[]};var U=function(e){var t=e.id,a=e.url,n=e.scenes,s=e.fetcherOptions,i=Object(o.useState)(0),l=c()(i,2),r=l[0],d=l[1],u=Object(o.useState)(!1),b=c()(u,2),m=b[0],v=b[1],O=Object(o.useState)([]),j=c()(O,2),p=j[0],f=j[1],g=Object(o.useState)([]),C=c()(g,2),h=C[0],k=C[1],N=Object(o.useState)([]),I=c()(N,2),w=I[0],S=I[1],G=Object(o.useState)(!1),L=c()(G,2),T=L[0],F=L[1],R=Object(o.useState)(E),_=c()(R,2),z=_[0],D=_[1],B=Object(o.useState)(!1),M=c()(B,2),P=M[0],U=M[1];Object(o.useEffect)((function(){v(!0);var e=a||"/api/v4/mcn/linkcard/".concat(t,"/goods?scenes=").concat(n);Object(x.a)(e,s).then((function(e){var t=Object(y.camelizeKeys)((null==e?void 0:e.data)||{}),a=t.goods,n=t.tabs,c=t.similarGoods,o=(null==n?void 0:n[0])||E;o.tabId&&A(o),f(a||[]),k(c||[]),S(n||[]),F(!1)})).catch((function(){F(!0)})).finally((function(){setTimeout((function(){v(!1)}),500)}))}),[t,r]);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(Object.assign({},e)),e.isGetDataDirect||(U(!0),Object(x.a)(e.tabDataUrl).then((function(t){var a,n=Object(y.camelizeKeys)((null==t||null===(a=t.data)||void 0===a?void 0:a.goods)||[]);S((function(t){return t.map((function(t){return t.tabId===e.tabId?Object.assign({},t,{isGetDataDirect:!0,tabData:n||[]}):t}))})),D((function(e){return Object.assign({},e,{tabData:n||[],isGetDataDirect:!0})})),U(!1)})).catch((function(){return U(!1)})))};return{refresh:r,setRefresh:d,isFailure:T,sameList:p,similarList:h,activeTabMap:z,setActiveTabMap:D,loading:m,tabs:w,seckillLoading:P,setIsFailure:F,handleChangeTab:A}},A=function(e){var t=e.className,a=e.style,n=e.showModal,s=void 0===n||n,i=e.withModal,r=void 0===i||i,u=e.modalTitle,b=void 0===u?"":u,v=e.id,O=e.url,j=void 0===O?"":O,p=e.fetcherOptions,f=void 0===p?{}:p,g=e.scenes,C=void 0===g?0:g,k=e.onClose,N=Object(P.a)(),I=U({url:j,id:v,fetcherOptions:f,scenes:C}),L=I.refresh,T=I.setRefresh,F=I.loading,R=I.sameList,_=I.similarList,z=I.tabs,D=I.isFailure,x=I.activeTabMap,E=I.handleChangeTab,A=I.seckillLoading,Z=Object(o.useRef)(),K=Object(o.useRef)(),q=Object(o.useRef)(0),V=Object(o.useState)(!0),H=c()(V,2),J=H[0],W=H[1],Q=l()((function(){var e=K.current.getClientRects()[0]||{top:0};e.top<q.current?W(!0):W(!1),setTimeout((function(){return q.current=e.top}))}),16);Object(o.useEffect)((function(){h.a.trackCardShow(null,{id:10331,path:[{module_name:v}]})}),[]),Object(o.useEffect)((function(){if(Z.current=document.getElementsByClassName("ModalWindow-inner")[0],Z.current&&K.current)return Z.current.addEventListener("scroll",Q),function(){return Z.current.removeEventListener("scroll",Q)}}),[Q]);var X=function(e,t){return(null==e?void 0:e.length)?Object(m.e)("div",{className:"PopupSelectList-list"},e.map((function(e){return(null==e?void 0:e.length)?e:[]})).map((function(e,a){return e.length?Object(m.e)(o.Fragment,{key:a},e.map((function(e,n){var c=e.id,s=e.goods,i=e.tags,l=e.promoInfo,r=e.attachedInfoBytes,u=s||{},b=u.skuId,v=u.title,O=u.subtitle,j=u.goodsImg,p=u.goodsUrl,f=u.price,g=u.source,h=u.productType,k=f||{},I=k.price,S=k.underlinePrice,G=Number((null==l?void 0:l.countdown)||0)>0&&"tag"!==t;return Object(m.e)(o.Fragment,{key:"".concat(b,"-").concat(a,"-").concat(n)},1===a&&0===n&&Object(m.e)("div",{className:"PopupSelectList-similarTitle"},"相似商品"),Object(m.e)(M.b,{content:{type:"GoodsRecommend",id:String(b),token:String(c)},extra:{attachedInfoBytes:r,link:{url:null==p?void 0:p.url}}},Object(m.e)(M.e,{shouldTrackClick:!0,zaBlock:"goodsRecommend_polymericPopupCard",className:d()({"GoodsCardList-listItem":G}),zaType:"Card",zaAction:"OpenUrl",zaEventType:"Click"},Object(m.e)(w,{className:"GoodsPopupList-cardItem",id:c,skuId:b,title:v,imgUrl:null==j?void 0:j.imgUrl,price:I,underlinePrice:S,source:g,subtitle:O,productType:h,showBottomLine:!1,zaData:{showId:10371,clickId:10372},tags:i,promoInfo:l,promoType:t,onClick:function(){return function(e){var t=Object(y.camelizeKeys)(e),a=t.id,n=t.goods||{},c=n.goodsUrl,o=n.source,s=c.url,i=c.iosSchema,l=c.androidSchema;N({id:a,url:s,source:o,scenes:C,appSchemaIos:i,appSchemaAndroid:l})}(e)}}))))}))):null}))):null},Y=Object(m.e)(M.b,{content:{type:"GoodsRecommend",id:String(v),token:String(v)}},Object(m.e)(M.e,{zaBlock:"goodsRecommend_polymericPopupPage",zaType:"Page",as:"div",className:"GoodsCardList-container",ref:K},Object(m.e)("div",{className:"GoodsCardList-titleContainer"},Object(m.e)("div",{className:"GoodsCardList-title"},"当前商品购买渠道")),F&&!D?Object(m.e)(B,{content:"C03,Spacing-26,C03",height:72}):X([R,_]),Boolean(null==z?void 0:z.length)&&Object(m.e)("div",{className:"GoodsCardList-tabs"},z.map((function(e){return Object(m.e)(M.e,{zaBlock:"goodsRecommend_tabButton",zaType:"Button",shouldTrackClick:!0,zaText:e.tabName,onClick:function(){return E(e)},className:d()("GoodsCardList-tab",{"GoodsCardList-tabAvtive":e.tabId===x.tabId}),key:e.tabId,content:{type:"GoodsRecommend",id:e.tabId}},e.tabName)}))),!D&&Object(m.e)("div",null,A?Object(m.e)("div",{style:{width:"100%"}},Object(m.e)(B,{content:"C03,Spacing-26,C03",height:72})):X([x.tabData],"tag")),D&&Object(m.e)("div",{className:"GoodsCardList-error"},Object(m.e)("div",{className:"GoodsCardList-errorDesc"},"Oops~ 出错了"),Object(m.e)("div",{className:"GoodsCardList-errorBtn",onClick:function(){T(L+1)}},"刷新重试")),Object(m.e)("div",{className:d()("GoodsCardList-backContainer",{"GoodsCardList-backContainerShow":!J}),style:{display:(null==z?void 0:z.length)?"block":"none"},onClick:function(){Z.current&&Z.current.scrollTo({top:0,behavior:"smooth"})}},Object(m.e)("div",{className:"GoodsCardList-backContent"},Object(m.e)(S,null),Object(m.e)("span",{className:"GoodsCardList-backText"},"返回顶部购买商品")))));return r?Object(m.e)(G.a,{className:d()("GoodsCardList",t),style:a,size:"large",title:b,onClose:k},s&&Y):Y};A.prototype={className:C.a.string,style:C.a.object,showModal:C.a.bool,withModal:C.a.bool,modalTitle:C.a.string,id:C.a.string,url:C.a.string,fetcherOptions:C.a.object,scenes:C.a.number,onClose:C.a.func,onSelectCard:C.a.func};var Z=A}}]);
//# sourceMappingURL=column.GoodsRecommendGoodsCardList.398d34107f7a9e5b06fd.js.map