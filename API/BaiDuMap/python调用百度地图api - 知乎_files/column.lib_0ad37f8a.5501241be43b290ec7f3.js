(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{466:function(e,t,o){"use strict";o.d(t,"a",(function(){return k})),o.d(t,"c",(function(){return T}));var n=o(24),a=o.n(n),i=o(32),c=o.n(i),l=o(35),r=o.n(l),s=o(118),d=o(1),p=o(5),u=o(886),g=o(7),b=o.n(g),f=o(42),x=o(9),h=o(154),m=o.n(h),v=o(204),C=o(706),j=o(3),O=["children","pl","targetId","handleScroll","handleAction","index","status","className","isCollapsed","inEditor","active"],y=["className"],L=["className"],S=["isCollapsed","inEditor","catalogRef","contentRoot","catalogLength","contentRootLeft"];var k={removed:"removed",toAdd:"toAdd",added:"added"},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object.values(k).find((function(t){return e.includes(t)}))},A=function(e){var t=e.children,o=e.pl,n=e.targetId,a=e.handleScroll,i=e.handleAction,l=e.index,d=e.status,u=e.className,g=e.isCollapsed,h=e.inEditor,m=e.active,v=c()(e,O);return Object(j.e)(x.a,r()({as:p.Text,zaType:"Text",className:b()(u,"Catalog-Title"),flexShrink:0,display:"flex",alignItems:"center",color:"GBL05A",fontSize:"12px",height:"20px",lineHeight:"20px",pl:"30px",css:function(e){return{position:"relative",height:"30px",lineHeight:"30px","&.Catalog-FirstLevelTitle, &.Catalog-SecondLevelTitle":{position:"relative",height:"30px",color:m?e.colors.GBL01A:e.colors.GBL05A,"&::before":{content:'" "',position:"absolute",backgroundColor:m?e.colors.GBL01A:e.colors.GBL05A,display:"inline-block",borderRadius:"50%",top:"12px",marginRight:"12px"},"&:hover::before":{backgroundColor:e.colors.GBL01A}},"&.Catalog-FirstLevelTitle::before":{left:g?"78px":"16px",width:"6px",height:"6px"},"&.Catalog-SecondLevelTitle::before":{left:g?"79px":"17px",width:"4px",height:"4px"},".Catalog-TitleIcon":Object.assign({position:"absolute",right:"10px",width:"12px",height:"12px",objectFit:"contain"},("toAdd"!==d||!t)&&{display:"none"}),"&::after":{content:'" "',display:"block",position:"absolute",left:g?"81px":"19px",top:0,transform:"translateX(-50%)",width:"2px",height:"40px",marginTop:"12px",background:e.colorMod(e.colors.GBL05A).alpha(.12)},"&:last-child":{"&::after":{height:0}}}}},v,{onClick:function(e){a(e,l)}}),!g&&Object(j.e)(p.Flex,{px:"10px",ml:o,css:function(e){return Object.assign(Object.assign({cursor:"pointer",alignItems:"center",width:"100%"},"toAdd"===d&&Boolean(t)&&{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px"}),{},{"&:hover":{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px",".Catalog-TitleIcon":{display:"block"}}})},"data-catalog-target-id":n,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文"},Object(j.e)(p.Text,{css:Object(s.a)([Object(f.d)(1),{pointerEvents:"none",wordBreak:"break-all",width:"calc(100% - 22px)"}],""),dangerouslySetInnerHTML:{__html:t}}),h&&("toAdd"===d?Object(j.e)(p.Image,{src:"https://pic3.zhimg.com/v2-b01c062116d91b98059d7c90bb1139d2.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),i(e,l,k.added)}}):Object(j.e)(p.Image,{src:"https://pic2.zhimg.com/v2-4bf4e045dbe37447d257b72b5a79b05c.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),i(e,l,k.removed)}}))))},w={name:"1nnq2op",styles:"&+.Catalog-FirstLevelTitle{margin-top:4px;}&+.Catalog-SecondLevelTitle{margin-top:4px;}"},B=function(e){var t=e.className,o=c()(e,y);return Object(j.e)(A,r()({className:b()(t,"Catalog-FirstLevelTitle"),fontWeight:"500",css:w},o))},I={name:"1nnq2op",styles:"&+.Catalog-FirstLevelTitle{margin-top:4px;}&+.Catalog-SecondLevelTitle{margin-top:4px;}"},z={1:B,2:function(e){var t=e.className,o=c()(e,L);return Object(j.e)(A,r()({className:b()(t,"Catalog-SecondLevelTitle"),pl:"10px",fontWeight:"400",css:I},o))}},E=function(e){var t,o,n=e.isCollapsed,i=e.inEditor,l=e.catalogRef,u=e.contentRoot,g=e.catalogLength,b=e.contentRootLeft,f=c()(e,S),h=Object(d.useState)(0),m=a()(h,2),v=m[0],C=m[1];return Object(d.useEffect)((function(){var e,t=null===(e=l.current)||void 0===e?void 0:e.clientHeight;i||C(-t)}),[l,i,b]),Object(d.useEffect)((function(){if(i)if(0===g)-267!==v&&C(-267);else{var e=76+34*g,t=parseInt(getComputedStyle(l.current).height),o=-Math.min(t,e);v!==o&&C(o)}}),[i,g,l,v]),i||u?(i?(t=180,o=-180):b<190?(t=76,o=-20):n?(t=100,o=-120):o=-(t=Math.min(b-40,250))-30,Object(j.e)(x.b,{block:i?"EditPage":"AnswerPage"},Object(j.e)(x.e,r()({ref:l,zaType:"Block",as:p.Box,css:Object(s.a)({position:"sticky",top:0,width:t,marginLeft:o,marginBottom:v,zIndex:1},"")},f)))):null},R={name:"3n0dwa",styles:"width:15px;height:15px;cursor:pointer;"},G={name:"zizye5",styles:"border-radius:10px;cursor:pointer;"},N=function(e){var t=e.isCollapsed,o=e.isCollapsedChange,n=e.contentRootLeft,a=e.inEditor,i=e.onClose;return Object(j.e)(p.Flex,{px:"10px",py:"8px",bg:"GBK99A",alignItems:"center",justifyContent:"space-between",color:"GBL05A",css:Object(s.a)({width:"100%",height:"40px",borderRadius:t?!a&&n>=190?"4px 0px 0px 4px":"0px 4px 4px 0px":"4px",position:"sticky",top:"0",zIndex:"1",boxShadow:"0px 1px 3px rgba(18, 18, 18, 0.1)"},"")},Object(j.e)(p.Flex,{alignItems:"center"},Object(j.e)(u.c,{size:15,text:!0,center:!0}),Object(j.e)(x.a,{as:p.Text,zaType:"Button",zaText:!0,shouldTrackClick:t,ml:"10px",fontSize:"14px",css:t&&{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(){t&&o(!1)}},t&&!a&&n>=190?"展开目录":"目录")),a&&Object(j.e)(p.Image,{src:"https://pic1.zhimg.com/v2-6264c104a2b3efcd0bd3c4876232aec3.png",onClick:i,css:R}),!a&&!t&&Object(j.e)(x.a,{as:p.Text,zaType:"Button",zaText:"收起目录",p:"2px 6px",bg:"GBK10A",color:"GBL05A",fontSize:"12px",lineHeight:"16px",css:G,onClick:function(){o(!0)}},"收起"))};t.b=function(e){var t=e.catalog,o=e.className,n=e.inEditor,i=e.scrollOffset,c=void 0===i?0:i,l=e.onClose,r=e.contentRoot,s=e.onChange,u=e.catalogRef,g=e.autoCalcShouldShow,f=e.maskGradientColor,x=void 0===f?"GBK10A":f,h=Object(d.useRef)(),O=Object(d.useRef)(),y=u||h,L=Object(d.useState)(!n),S=a()(L,2),T=S[0],A=S[1],w=Object(d.useState)(0),I=a()(w,2),R=I[0],G=I[1],F=Object(d.useState)(null),H=a()(F,2),q=H[0],M=H[1],K=Object(d.useState)(!1),D=a()(K,2),P=D[0],W=D[1],_=Object(d.useState)(!1),J=a()(_,2),V=J[0],X=J[1],Q=Object(d.useState)(!1),U=a()(Q,2),Y=U[0],Z=U[1];Object(C.a)(null==y?void 0:y.current,r);var $=Object(d.useCallback)((function(e,t){if(n){var o=document.querySelector(".DraftEditor-editorContainer");if(o){var a=Array.from(o.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(v.a)(a,c)}))}}}),[n,c]),ee=Object(d.useCallback)((function(e,o,n){var a=document.querySelector(".DraftEditor-editorContainer");if(a){var i=Array.from(a.querySelectorAll("h2,h3"))[o].getAttribute("data-offset-key").split("-")[0];t[o].status=k.removed,s(i,n)}}),[t,s]);Object(d.useEffect)((function(){if(r){var e=r.getBoundingClientRect().left;G(e),e>=190&&A(!1)}}),[r]);var te=(null==O?void 0:O.current)||{},oe=te.scrollHeight,ne=te.clientHeight;Object(d.useEffect)((function(){W(oe>ne)}),[oe,ne]);var ae=Object(d.useMemo)((function(){return null==t?void 0:t.filter((function(e){return e.status!==k.removed}))}),[t]).length,ie=m()((function(){var e,o,a;if(!ae||n||T||(o=null,a=Object(v.b)(),t.forEach((function(e){if(e.status!==k.removed){var t=document.querySelector("#"+e.targetId);(null==t?void 0:t.getBoundingClientRect().top)<=a+2&&(o=e.targetId)}})),o!==q&&(M(o),null===(e=document.querySelector('[data-catalog-target-id="'.concat(o,'"]')))||void 0===e||e.scrollIntoViewIfNeeded())),null!=y&&y.current&&g){var i,c=null!=r?r:null==y||null===(i=y.current)||void 0===i?void 0:i.parentElement;if(c&&null!=y&&y.current){var l=c.getBoundingClientRect(),s=l.bottom,d=l.height,p=getComputedStyle(c),u=p.paddingTop,b=p.marginTop,f=y.current.getBoundingClientRect(),x=f.bottom,h=f.height;s-x<Math.min(0,d-(h+parseInt(u)+parseInt(b)))?y.current.style.visibility="hidden":y.current.style.visibility="visible"}}}),100);Object(d.useEffect)((function(){return document.addEventListener("scroll",ie),function(){document.removeEventListener("scroll",ie)}}),[r,ie]);var ce=m()((function(){var e;(null===(e=O.current)||void 0===e?void 0:e.scrollTop)<20?X(!1):X(!0);var t=O.current||{},o=t.scrollHeight,n=t.clientHeight,a=t.scrollTop;Z(!(o-n-a<20))}),100);return Object(d.useEffect)((function(){var e=O.current;if(e)return e.addEventListener("scroll",ce),function(){return e.removeEventListener("scroll",ce)}}),[O,ce]),n||ae&&r?Object(j.e)(E,{catalogRef:y,catalogLength:ae,inEditor:n,isCollapsed:T,contentRoot:r,contentRootLeft:R,className:b()(o,"Catalog","isCatalogV2",{isCollapsed:T}),pb:"20px","data-za-detail-view-name":"正文"},Object(j.e)(N,{inEditor:n,isCollapsed:T,contentRootLeft:R,isCollapsedChange:A,onClose:l}),(R>=190||n)&&(ae?Object(j.e)(p.Box,{mt:"20px",ref:O,css:function(e){return Object.assign({maxHeight:"calc(100vh - 200px)",overflow:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},P&&{"&::before, &::after":{content:'" "',position:"absolute",width:"calc(100% - 15px)",height:"36px",pointerEvents:"none",marginLeft:"15px",zIndex:1,transition:"opacity .2s ease-in-out"},"&::before":{opacity:V?1:0,top:"60px",background:"linear-gradient(180deg, ".concat(e.colors[x]," 0%, ").concat(e.colorMod(e.colors[x]).alpha(0)," 100%)")},"&::after":{opacity:Y?1:0,bottom:"20px",background:"linear-gradient(180deg, ".concat(e.colorMod(e.colors[x]).alpha(0)," 0%, ").concat(e.colors[x]," 100%)")}})}},Object(j.e)(p.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px"},t.map((function(e){var t=e.titleLevel,o=e.text,a=e.targetId,i=e.status,c=e.index,l=z[t]||B;return i!==k.removed?Object(j.e)(l,{key:String([a,c]),targetId:a,handleScroll:$,handleAction:ee,index:c,status:i,isCollapsed:T,inEditor:n,active:q===(a||c)},o):null})))):Object(j.e)(p.Flex,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(j.e)(p.Box,{size:"160px",mb:"10px"},Object(j.e)(p.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(j.e)(p.Text,{color:"GBK05A",fontSize:"12px",lineHeight:"19px",textAlign:"center"},"在内容中设置标题会在此展示")))):null}}}]);
//# sourceMappingURL=column.lib_0ad37f8a.5501241be43b290ec7f3.js.map